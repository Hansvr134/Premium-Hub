local Rayfield = loadstring(game:HttpGet('https://sirius.menu/rayfield'))()

local Window = Rayfield:CreateWindow({
   Name = "STEAL A BRAINROT",
   Icon = 0,
   LoadingTitle = "Loding....",
   LoadingSubtitle = "Script by Hanzo",
   Theme = "DarkBlue",
   DisableRayfieldPrompts = false,
   DisableBuildWarnings = false,
   ConfigurationSaving = {
      Enabled = true,
      FolderName = "HanzHub",
      FileName = "Hanz Hub"
   },
   Discord = {
      Enabled = true,
      Invite = "ECxQFc97F5",
      RememberJoins = true
   },
   KeySystem = False,
   KeySettings = {
      Title = "Han Key",
      Subtitle = "Key system",
      Note = "Mau Key? Buy Key Premium",
      FileName = "Key",
      SaveKey = true,
      GrabKeyFromSite = false,
      Key = {"Premium_jfgue786eh767et75egyf5"}
   }
})

local Tab = Window:CreateTab("Discord Invite", 4483362458) -- Title, Image
local Section = Tab:CreateSection("Menu")

local Button = Tab:CreateButton({
   Name = "Copy Discord Link",
   Callback = function()
      -- Ganti link di sini dengan link Discord kamu
      setclipboard("https://discord.gg/ECxQFc97F5")
      
      -- Tampilkan notifikasi bahwa link sudah dicopy
      Rayfield:Notify({
         Title = "Copied!",
         Content = "Discord link copied to clipboard.",
         Duration = 2,
         Image = 4483362458,
         Actions = {
            Ignore = {
               Name = "OK",
               Callback = function() end
            }
         }
      })
   end,
})

local Tab = Window:CreateTab("[‚öôÔ∏è]Setting", nil)
local Section = Tab:CreateSection("Menu")

local TweenService = game:GetService("TweenService")
local Players = game:GetService("Players")
local LocalPlayer = Players.LocalPlayer
local Character = LocalPlayer.Character or LocalPlayer.CharacterAdded:Wait()
local root = Character:WaitForChild("HumanoidRootPart")

-- Update karakter kalau respawn
local function updateCharacter()
    Character = LocalPlayer.Character or LocalPlayer.CharacterAdded:Wait()
    root = Character:WaitForChild("HumanoidRootPart")
end

-- Daftar posisi pintu
local doorPositions = {
    Vector3.new(-466, -1, 220), Vector3.new(-466, -2, 116), Vector3.new(-466, -2, 8),
    Vector3.new(-464, -2, -102), Vector3.new(-351, -2, -100), Vector3.new(-354, -2, 5),
    Vector3.new(-354, -2, 115), Vector3.new(-358, -2, 223)
}

-- Cari pintu terdekat
local function getNearestDoor()
    if not root then updateCharacter() end
    local closest, minDist = nil, math.huge
    for _, door in ipairs(doorPositions) do
        local dist = (root.Position - door).Magnitude
        if dist < minDist then
            minDist = dist
            closest = door
        end
    end
    return closest
end

-- Teleport ke pintu lalu ke langit
local function teleportToSky()
    if not root then updateCharacter() end
    local door = getNearestDoor()
    if door and root then
        TweenService:Create(root, TweenInfo.new(1.2), { CFrame = CFrame.new(door) }):Play()
        task.wait(1.3)
        root.CFrame = root.CFrame + Vector3.new(0, 200, 0)
    end
end

-- Turun ke tanah
local function teleportToGround()
    if not root then updateCharacter() end
    if root then
        root.CFrame = root.CFrame - Vector3.new(0, 50, 0)
    end
end

-- Toggle untuk aktifkan/matikan teleportasi
local Toggle = Tab:CreateToggle({
   Name = "Teleport ke Sky",
   CurrentValue = false,
   Flag = "ToggleSkyTeleport",
   Callback = function(Value)
      if Value then
         teleportToSky()
      else
         teleportToGround()
      end
   end,
})

local Players = game:GetService("Players")
local LocalPlayer = Players.LocalPlayer
local RunService = game:GetService("RunService")

local speedEnabled = false
local speedConnection = nil
local normalSpeed = 16
local fastSpeed = 80

-- Ganti ini dengan deteksi saat mencuri brainrot
local function isHoldingBrainrot()
    local character = LocalPlayer.Character
    if not character then return false end

    -- Contoh deteksi: ada Tool bernama "Brainrot" atau item tertentu
    return character:FindFirstChild("Brainrot") or LocalPlayer.Backpack:FindFirstChild("Brainrot")
end

-- Toggle untuk aktifkan deteksi dan efek kecepatan
local Toggle = Tab:CreateToggle({
   Name = "Auto Fast Setelah Nyuri Brainrot",
   CurrentValue = false,
   Flag = "ToggleBrainrotSpeed",
   Callback = function(Value)
      speedEnabled = Value

      if speedEnabled then
         speedConnection = RunService.Stepped:Connect(function()
            local character = LocalPlayer.Character or LocalPlayer.CharacterAdded:Wait()
            local humanoid = character:FindFirstChildOfClass("Humanoid")
            if humanoid then
               if isHoldingBrainrot() then
                  humanoid.WalkSpeed = fastSpeed
               else
                  humanoid.WalkSpeed = normalSpeed
               end
            end
         end)
      else
         if speedConnection then
            speedConnection:Disconnect()
            speedConnection = nil
         end

         -- Reset speed ke default
         local character = LocalPlayer.Character or LocalPlayer.CharacterAdded:Wait()
         local humanoid = character and character:FindFirstChildOfClass("Humanoid")
         if humanoid then
            humanoid.WalkSpeed = normalSpeed
         end
      end
   end,
})

local brainESPEnabled = false
local espFolder = Instance.new("Folder", game.CoreGui)
espFolder.Name = "BrainrotESP"

local function createESP(obj)
    if not obj:IsA("BasePart") then return end
    local billboard = Instance.new("BillboardGui")
    billboard.Adornee = obj
    billboard.Size = UDim2.new(0, 100, 0, 20)
    billboard.StudsOffset = Vector3.new(0, 2, 0)
    billboard.AlwaysOnTop = true
    billboard.Parent = espFolder

    local textLabel = Instance.new("TextLabel")
    textLabel.Size = UDim2.new(1, 0, 1, 0)
    textLabel.BackgroundTransparency = 1
    textLabel.TextColor3 = Color3.fromRGB(255, 255, 0)
    textLabel.TextStrokeTransparency = 0
    textLabel.TextScaled = true
    textLabel.Text = "üß† Brainrot"
    textLabel.Font = Enum.Font.GothamBold
    textLabel.Parent = billboard
end

local function removeAllESP()
    espFolder:ClearAllChildren()
end

local function scanBrainrotAboveMythical()
    removeAllESP()
    for _, obj in pairs(workspace:GetDescendants()) do
        if obj:IsA("BasePart") and obj.Name:lower():find("brainrot") then
            local y = obj.Position.Y
            if y > 100 then -- ubah angka ini sesuai ketinggian Mythical
                createESP(obj)
            end
        end
    end
end

-- Toggle Rayfield
Tab:CreateToggle({
   Name = "ESP Brainrot di atas Mythical",
   CurrentValue = false,
   Flag = "ESPBrainrotToggle",
   Callback = function(state)
      brainESPEnabled = state

      if state then
         task.spawn(function()
            while brainESPEnabled do
                scanBrainrotAboveMythical()
                task.wait(2)
            end
         end)
      else
         removeAllESP()
      end
   end,
})

local Players = game:GetService("Players")
local RunService = game:GetService("RunService")

local LocalPlayer = Players.LocalPlayer
local Camera = workspace.CurrentCamera

local aimbotEnabled = false
local targetBox = nil
local distanceLabel = nil
local connection = nil

-- Fungsi cari player terdekat
local function getClosestPlayer()
    local closest, distance = nil, math.huge
    for _, player in pairs(Players:GetPlayers()) do
        if player ~= LocalPlayer and player.Character and player.Character:FindFirstChild("HumanoidRootPart") then
            local hrp = player.Character.HumanoidRootPart
            local screenPoint, onScreen = Camera:WorldToViewportPoint(hrp.Position)
            if onScreen then
                local dist = (Vector2.new(screenPoint.X, screenPoint.Y) - Vector2.new(Camera.ViewportSize.X/2, Camera.ViewportSize.Y/2)).Magnitude
                if dist < distance then
                    closest = player
                    distance = dist
                end
            end
        end
    end
    return closest
end

-- Buat ESP Box
local function createESPBox(target)
    if targetBox then targetBox:Destroy() end
    local hrp = target.Character:FindFirstChild("HumanoidRootPart")
    if not hrp then return end

    local box = Instance.new("BoxHandleAdornment")
    box.Name = "TargetBox"
    box.Adornee = hrp
    box.Size = Vector3.new(3, 6, 3)
    box.AlwaysOnTop = true
    box.ZIndex = 10
    box.Color3 = Color3.fromRGB(255, 0, 0)
    box.Transparency = 0.5
    box.Parent = hrp

    targetBox = box
end

-- Buat Label Jarak
local function createDistanceLabel(target)
    if distanceLabel then distanceLabel:Destroy() end
    local head = target.Character:FindFirstChild("Head")
    if not head then return end

    local billboard = Instance.new("BillboardGui")
    billboard.Name = "DistanceLabel"
    billboard.Adornee = head
    billboard.Size = UDim2.new(0, 100, 0, 20)
    billboard.StudsOffset = Vector3.new(0, 2.5, 0)
    billboard.AlwaysOnTop = true
    billboard.Parent = head

    local textLabel = Instance.new("TextLabel", billboard)
    textLabel.Size = UDim2.new(1, 0, 1, 0)
    textLabel.BackgroundTransparency = 1
    textLabel.TextColor3 = Color3.new(1, 1, 1)
    textLabel.TextStrokeTransparency = 0
    textLabel.Font = Enum.Font.SourceSansBold
    textLabel.TextScaled = true
    textLabel.Text = "..."

    distanceLabel = billboard

    return textLabel
end

-- Toggle Aimbot
local Toggle = Tab:CreateToggle({
   Name = "AimbotLock",
   CurrentValue = false,
   Flag = "ToggleAimbot",
   Callback = function(v)
      aimbotEnabled = v
      
      if aimbotEnabled then
         connection = RunService.RenderStepped:Connect(function()
            local target = getClosestPlayer()
            if target and target.Character and target.Character:FindFirstChild("HumanoidRootPart") then
                local hrp = target.Character.HumanoidRootPart
                Camera.CFrame = CFrame.new(Camera.CFrame.Position, hrp.Position)

                createESPBox(target)

                local textLabel = createDistanceLabel(target)
                if textLabel then
                    local distance = math.floor((LocalPlayer.Character.HumanoidRootPart.Position - hrp.Position).Magnitude)
                    textLabel.Text = "Jarak: " .. distance .. "m"
                end
            end
         end)
      else
         if connection then
            connection:Disconnect()
            connection = nil
         end
         if targetBox then
            targetBox:Destroy()
            targetBox = nil
         end
         if distanceLabel then
            distanceLabel:Destroy()
            distanceLabel = nil
         end
      end
   end,
})

STab:CreateButton({
   Name = "Discord Invite",
   Callback = function()
      setclipboard("https://discord.gg/EJkYJMt337")
      Rayfield:Notify({
         Title = "Copied!",
         Content = "Discord link copied to clipboard.",
         Duration = 2,
         Image = 4483362458,
         Actions = {
            Ignore = {
               Name = "OK",
               Callback = function() end
            }
         }
      })
   end,
})
